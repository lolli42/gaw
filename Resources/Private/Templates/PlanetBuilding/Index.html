{namespace gaw=Lolli\Gaw\ViewHelpers}

<f:layout name="Game" />

<f:section name="Title">
	<f:if condition="{selectedPlanet.name}">
		<f:then>
			Ausbau "{selectedPlanet.name}"
		</f:then>
		<f:else>
			Planetenausbau
		</f:else>
	</f:if>
</f:section>

<f:section name="Content">
	<table>

		<f:comment>
			<tr>
				<th>In Bau</th>
				<td>{selectedPlanet.structureInProgress}</td>
				<td>
					<f:if condition="{selectedPlanet.structureReadyTime}">
						<f:format.date forceLocale="de_DE" format="H:i:s">
							<f:format.printf arguments="{0: selectedPlanet.structureReadyTime}">@%1$d</f:format.printf>
						</f:format.date>
					</f:if>
				</td>
			</tr>
		</f:comment>

		<f:comment>
			<tr>
				<f:form action="renamePlanet" object="{selectedPlanet}" objectName="planet">
					<th>Name</th>
					<td><f:form.textfield property="name" id="name" /></td>
					<td><f:form.submit value="Umbenennen" /></td>
				</f:form>
			</tr>
		</f:comment>

		<thead>
			<tr>
				<th colspan="2">
					Geb√§ude
				</th>
			</tr>
		</thead>

		<f:for
			each="{
				0: 'base',
				1: 'ironMine',
				2: 'siliconMine',
				3: 'xenonMine',
				4: 'hydrazineMine',
				5: 'energyMine'
			}"
			as="structureName"
		>
			<f:if condition="{selectedPlanet -> gaw:planet.isStructureAvailable(structureName: structureName)}">
				<tr>
					<td>
						<f:translate id="planet.{structureName}" />
						<span class="entity-available">[{selectedPlanet -> gaw:property(propertyName: structureName)}]</span>
					</td>
					<td>
						<f:form action="addStructureToBuildQueue" object="{selectedPlanet}" objectName="planet">
							<f:form.hidden value="{structureName}" name="structureName" />
							<f:form.submit value="Ausbauen" />
						</f:form>
					</td>
				</tr>
			</f:if>
		</f:for>
	</table>

	<table>
		<thead>
			<tr>
				<th colspan="2">
					Techtree
				</th>
			</tr>
		</thead>
		<tbody>
			<f:for each="{structureTechTree}" as="requirements" key="structureName">
				<tr>
					<td>
						<f:translate id="planet.{structureName}" />
					</td>
					<td>
						<ul class="no-bullet no-margin-bottom">
							<f:for each="{requirements}" as="level" key="requirement">
								<f:if condition="{selectedPlanet -> gaw:property(propertyName: requirement)} < {level}">
								<f:then>
									<li>
										<f:translate id="planet.{requirement}" />
										<span class="entity-not-available">[{level}]</span>
										<span class="entity-available">[{selectedPlanet -> gaw:property(propertyName: requirement)}]</span>
									</li>
								</f:then>
								<f:else>
									<li>
										<f:translate id="planet.{requirement}" />
										<span class="entity-available">[{level}]</span>
									</li>
								</f:else>
							</f:if>
						</f:for>
						</ul>
					</td>
				</tr>
			</f:for>
		</tbody>
	</table>
</f:section>